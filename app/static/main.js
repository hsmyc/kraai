class u{oldState=[];newState=[];cache=new Map;constructor(e){this.oldState=[...e],this.newState=[...e],this.cache.set(JSON.stringify(e),e)}refresher(e){const t=this.oldState.find((m)=>m.id===e)?.value,n=this.newState.find((m)=>m.id===e)?.value;return t!==n}getState(e){return this.newState.find((t)=>t.id===e)}setState(e,t){this.oldState=[...this.newState];const n=this.newState.findIndex((m)=>m.id===e.id);if(n!==-1)this.newState[n]={...e};if(this.cache.set(JSON.stringify(this.oldState),[...this.newState]),this.refresher(e.id))t()}getCache(){return this.cache}}function r(){const{id:e,value:t}=c.getState(o.id);c.setState({id:e,value:t+1},()=>l(E,e))}function a(){const{id:e,value:t}=c.getState(o.id);c.setState({id:e,value:t-1},()=>l(E,e))}function l(e,t){e.innerText=c.getState(t).value.toString()}function L(){l(E,o.id),l(i,d.id)}var o={id:0,value:0},d={id:1,value:"Osman"},c=new u([o,d]),g=document.getElementById("increment"),v=document.getElementById("decrement"),E=document.getElementById("count"),i=document.getElementById("message"),s=document.getElementById("input");g?.addEventListener("click",r);v?.addEventListener("click",a);s?.addEventListener("input",(e)=>{const t=e.target.value,{id:n}=c.getState(d.id);c.setState({id:n,value:t},()=>l(i,n))});L();
